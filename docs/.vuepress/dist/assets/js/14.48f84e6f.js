(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{201:function(a,e,t){"use strict";t.r(e);var n=t(0),s=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"前端部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端部署"}},[a._v("#")]),a._v(" 前端部署")]),a._v(" "),t("h2",{attrs:{id:"项目打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目打包"}},[a._v("#")]),a._v(" 项目打包")]),a._v(" "),t("p",[a._v("如果未安装"),t("code",[a._v("HbuilderX")]),a._v("，请"),t("a",{attrs:{href:"https://www.dcloud.io/hbuilderx.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("点击此处前往下载编译器"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("选择左上角菜单选择发行对应端的代码进行编译打包即可")]),a._v(" "),t("blockquote",[t("p",[a._v("建议安装"),t("code",[a._v("finalshell")]),a._v("，一款服务器可视化工具，方便管理自己的服务器。")])]),a._v(" "),t("h3",{attrs:{id:"window"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window"}},[a._v("#")]),a._v(" window")]),a._v(" "),t("ul",[t("li",[a._v("到"),t("code",[a._v("nginx")]),a._v("官网下载"),t("code",[a._v("window")]),a._v("版压缩包（作者使用的是"),t("code",[a._v("nginx-1.14.2")]),a._v("）")])]),a._v(" "),t("blockquote",[t("p",[a._v("http://nginx.org/en/download.html")])]),a._v(" "),t("ul",[t("li",[t("p",[a._v("在任意位置解压"),t("code",[a._v("nginx")]),a._v("压缩包")])]),a._v(" "),t("li",[t("p",[a._v("进入"),t("code",[a._v("nginx")]),a._v("根目录，并在"),t("code",[a._v("html")]),a._v("目录下新建一个文件夹"),t("code",[a._v("admin")]),a._v("文件夹")])]),a._v(" "),t("li",[t("p",[a._v("回到"),t("code",[a._v("nginx")]),a._v("根目录，并进入到"),t("code",[a._v("conf")]),a._v("目录下，找到"),t("code",[a._v("nginx.conf")]),a._v("并打开")])]),a._v(" "),t("li",[t("p",[a._v("找到"),t("code",[a._v("http")]),a._v("域并另起一行，加入如下代码：")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sever {\n  listen 80;\n  server_name xxx.com;#(您的域名)\n  location / {\n    root html/admin;\n\t\ttry_files $uri $uri/ /index.html;\n\t\tindex index.html;\n  }\n}\n")])])]),t("ul",[t("li",[a._v("回到"),t("code",[a._v("nginx")]),a._v("根目录，双击"),t("code",[a._v("nginx.exe")]),a._v("运行"),t("code",[a._v("nginx")])])]),a._v(" "),t("h3",{attrs:{id:"linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[a._v("#")]),a._v(" linux")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("安装"),t("code",[a._v("nginx")])]),a._v(" "),t("ul",[t("li",[a._v("配置"),t("code",[a._v("nginx")]),a._v("安装仓库")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/yum.repos.d/nginx.repo\n")])])]),t("ul",[t("li",[a._v("填入配置信息并保存退出("),t("code",[a._v(":wq")]),a._v("命令)")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/7/$basearch/\ngpgcheck=0\nenabled=1\n")])])]),t("ul",[t("li",[a._v("下载并安装"),t("code",[a._v("nginx")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum install nginx\n")])])]),t("ul",[t("li",[a._v("检查是否安装成功")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("nginx -v\n")])])]),t("ul",[t("li",[a._v("如果有显示版本信息，那么则安装成功。作者提示的信息如下（现在最新版本为1.16.x）：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("nginx version: nginx/1.14.0\n")])])])]),a._v(" "),t("li",[t("p",[a._v("配置"),t("code",[a._v("nginx")])]),a._v(" "),t("ul",[t("li",[a._v("进入到配置文件目录下")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /etc/nginx/conf.d\n")])])]),t("ul",[t("li",[a._v("新建服务器文件")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("touch admin.conf\n")])])]),t("ul",[t("li",[a._v("配置"),t("code",[a._v("admin.conf")]),a._v("文件")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim admin.conf\n")])])]),t("ul",[t("li",[a._v("填入如下配置内容：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("server {\n  listen 80;\n  server_name xxx.com;#(您的域名)\n  location / {\n    root /usr/share/nginx/admin;\n    try_files $uri $uri/ /index.html;\n    index index.html;\n  }\n}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("新建前端静态文件目录")]),a._v(" "),t("ul",[t("li",[a._v("进入到如下目录：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /usr/share/nginx\n")])])]),t("ul",[t("li",[a._v("创建"),t("code",[a._v("admin")]),a._v("文件夹：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir admin\n")])])]),t("ul",[t("li",[a._v("进入到"),t("code",[a._v("admin")]),a._v("文件夹目录下：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd admin\n")])])])]),a._v(" "),t("li",[t("p",[a._v("将打包好的文件上传至该文件夹里，"),t("code",[a._v("admin")]),a._v("内文件目录如下：")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("├─assets\n│  ├─css\n│  ├─images\n│  └─js\n├─css\n├─fonts\n├─img\n├─js\n└─ueditor\n")])])]),t("blockquote",[t("p",[a._v("如果使用finalshell，则可直接拖拽文件上传，否则请使用linux第三方上传工具进行远程上传")])]),a._v(" "),t("ul",[t("li",[a._v("重启"),t("code",[a._v("nginx")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("nginx -s reload\n")])])]),t("br"),a._v(" "),t("blockquote",[t("p",[a._v("打开浏览器输入您的域名，按下回车键，开始你的愉快分享之旅吧！")])]),a._v(" "),t("br"),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"配置nodejs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nodejs"}},[a._v("#")]),a._v(" 配置nodejs")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("回到服务器根目录")])]),a._v(" "),t("li",[t("p",[a._v("下载"),t("code",[a._v("node.js")])])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://npm.taobao.org/mirrors/node/v12.4.0/node-v12.4.0-linux-x64.tar.xz\n")])])]),t("ul",[t("li",[a._v("解压")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -xvf node-v12.4.0-linux-x64.tar.xz\n")])])]),t("ul",[t("li",[a._v("进入"),t("code",[a._v("bin")]),a._v("目录")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd node-v12.4.0-linux-x64/bin\n")])])]),t("ul",[t("li",[a._v("测试")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./node -v # 如果出现版本号即安装成功\n")])])]),t("ul",[t("li",[a._v("关联并全局使用")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ln -s /node-v12.4.0-linux-x64/bin/node /usr/local/bin/node\n\nln -s /node-v12.4.0-linux-x64/bin/npm /usr/local/bin/npm\n")])])]),t("br"),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"配置cnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置cnpm"}},[a._v("#")]),a._v(" 配置cnpm")]),a._v(" "),t("ul",[t("li",[a._v("安装"),t("code",[a._v("cnpm")]),a._v("(前提是已经安装好"),t("code",[a._v("node")]),a._v("并全局关联)")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install -g cnpm --registry=https://registry.npm.taobao.org\n")])])]),t("ul",[t("li",[a._v("关联"),t("code",[a._v("cnpm")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ln -s /node-v12.4.0-linux-x64/bin/npm /usr/local/bin/cnpm\n")])])]),t("br"),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"配置gzip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置gzip"}},[a._v("#")]),a._v(" 配置gzip")]),a._v(" "),t("br"),a._v(" "),t("blockquote",[t("p",[a._v("配置gzip后，静态文件将被压缩成更小的文件，大大提升浏览器访问静态文件的速度。")])]),a._v(" "),t("ul",[t("li",[a._v("打开"),t("code",[a._v("nginx.conf")]),a._v("，并在"),t("code",[a._v("http")]),a._v("模块任意行加入如下代码：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("gzip on;\ngzip_types application/javascript text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/json;\n")])])]),t("ul",[t("li",[a._v("保存并重启"),t("code",[a._v("nginx")])])]),a._v(" "),t("p",[t("code",[a._v("window")]),a._v("与"),t("code",[a._v("linux")]),a._v("的配置方式完全一致，只需要找到"),t("code",[a._v("nginx.conf")]),a._v("配置文件进行如上操作即可")]),a._v(" "),t("br"),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"负载均衡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡"}},[a._v("#")]),a._v(" 负载均衡")]),a._v(" "),t("blockquote",[t("p",[a._v("有效处理服务器高并发，同时也适用于平滑部署")])]),a._v(" "),t("ul",[t("li",[a._v("打开"),t("code",[a._v("nginx.conf")]),a._v("，并在"),t("code",[a._v("http")]),a._v("模块任意行加入如下代码：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("upstream xuanzai {\n\tserver xxx.com weight=10; # 服务器1\n\tserver xxx.com weight=10; # 服务器2\n}\n")])])]),t("ul",[t("li",[a._v("配置"),t("code",[a._v("server")]),a._v("模块")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("server {\n\tlisten 80;\n\tserver_name xzadmin.xuanzai.top; # 暴露给用户访问的域名\n\tlocation / {\n\t\tproxy_pass http://xuanzai; # 名称与负载均衡配置的名称一致\n\t\tproxy_redirect default;\n\t\tindex index.html;\t\n\t\troot html;\n\t}\t\n}\n")])])]),t("ul",[t("li",[a._v("保存并重启"),t("code",[a._v("nginx")])])]),a._v(" "),t("p",[a._v("这样，简单的负载均衡就配置完成了！"),t("br"),a._v("\n此时如果两个（或多个）服务器已开启，那么可尝试访问已配置好的域名，查看是否配置成功"),t("br"),a._v(" "),t("code",[a._v("window")]),a._v("与"),t("code",[a._v("linux")]),a._v("的配置方式完全一致，只需要找到"),t("code",[a._v("nginx.conf")]),a._v("配置文件进行如上操作即可")]),a._v(" "),t("br"),a._v(" "),t("ul",[t("li",[a._v("平滑部署")])]),a._v(" "),t("blockquote",[t("p",[a._v("如果没有使用服务器负载均衡，那么每次部署都势必会影响用户的访问。使用了负载均衡，则在部署期间可逐个服务器部署而不影响用户的使用体验。（部署前先停止该服务器的运行"),t("code",[a._v("nginx -s stop")]),a._v("，否则用户访问便可能会报502、404等类似的错误）")])]),a._v(" "),t("br"),a._v(" "),t("br")])}),[],!1,null,null,null);e.default=s.exports}}]);